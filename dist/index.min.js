/**
 * ng-table-async
 * ngTable wrapper that offers some basic functionality and abstractions for working with asynchronous tables.
 * @author  Andrés Mata Suárez <amatasuarez@gmail.com>
 * @version 0.0.0
 * @link    https://github.com/andresmatasuarez/ng-table-async
 * @license MIT
 */(function(){"use strict";var t,e,n,a,i,l;t=angular.module("ngTableAsync",["ngTable"]),l=function(t){return _.map(t.children(),function(t){return t=angular.element(t),t.is("action")?'<ng-table-async-button label  = "'+t.attr("label")+'" action = "actions.'+t.attr("perform")+'(item)" style  = "'+t.attr("style")+'" size   = "'+t.attr("size")+'" icon   = "'+t.attr("icon")+'"> </ng-table-async-button>':t[0].outerHTML})},a=function(t){var e,n,a;return t=angular.element(t),e=t.html(),e?(a=_.isEmpty(t.find("content"))?t:t.find("content"),e="<td>"+l(a).join(" ")+"</td>"):(n=t.attr("content"),e=n?'<td ng-bind="'+n+'"></td>':"<td></td>"),e},i=function(t){var e;return t=angular.element(t),e=_.isEmpty(t.attr("header"))?"":t.attr("header"),e?e='<th ng-bind="'+e+'"></th>':(_.isEmpty(t.find("content"))||(e=t.find("header").html()),e="<th>"+e+"</th>"),e},n=function(t){return{header:i(t),content:a(t)}},e={pagerOnTop:function(t){return _.isUndefined(t)?DEFAULT_PAGER_ON_TOP:t},pagerOnBottom:function(t){return _.isUndefined(t)?DEFAULT_PAGER_ON_BOTTOM:t},firstPage:function(t){return t||DEFAULT_FIRST_PAGE},pageSize:function(t){return t||DEFAULT_PAGE_SIZE},actions:{dialog:{params:function(t){return _.isFunction(t)?t:function(){return _.isEmpty(t),void 0}}}}},t.value("ngTableAsyncDefaults",{FIRST_PAGE:1,PAGE_SIZE:10,NO_DATA_AVAILABLE_TEXT:"No available results to show",PAGER_ON_TOP:!1,PAGER_ON_BOTTOM:!0}),t.directive("ngTableAsync",function(t,a,i){return{restrict:"E",scope:{options:"="},template:function(t,e){var a,i,l,r,o,s,c,d,u,p;return a=t.find("column"),p=_.map(a,n),l=_.map(p,"header"),i=_.map(p,"content"),r=t.find("no-data-available"),o=r.html(),o||(s=r.attr("template-url"),o=s?'<ng-table-async-no-data-available template-url="'+s+'"></ng-table-async-no-data-available>':'<ng-table-async-no-data-available text="'+r.attr("text")+'"></ng-table-async-no-data-available>'),c=t.find("pager"),u=c.attr("template-url"),d='<ng-table-async-pager template-url="'+u+'"></ng-table-async-pager>','<div class="container table-container" ng-show="tableParams.total()"> <div class="row"> <div class="col-md-12"> <div ng-if="options.pagerOnTop"> '+d+' </div> <div class="table-content row"> <div class="panel panel-default"> <table ng-table="tableParams" class="table ng-table ng-table-responsive"> <thead> <tr> '+l.join(" ")+' </tr> </thead> <tbody> <tr ng-repeat="item in $data"> '+i.join(" ")+' </tr> </tbody> </table> </div> <div ng-show="loadingTable" class="loadingTable text-center"> <i class="fa fa-spin fa-4x fa-spinner"></i> </div> </div> <div ng-if="options.pagerOnBottom"> '+d+' </div> </div> </div> </div> <div ng-show="!tableParams.total()"> '+o+" </div>"},controller:function(n,l){return n.options=_.merge({pagerOnTop:DEFAULT_PAGER_ON_TOP,pagerOnBottom:DEFAULT_PAGER_ON_BOTTOM,firstPage:DEFAULT_FIRST_PAGE,pageSize:DEFAULT_PAGE_SIZE},n.options),n.actions=_.map(n.options.actions,function(i,l){var r,o,s,c,d;return s=_.isFunction(i)?i:i.method,d=_.isUndefined(i.reload)?!0:i.reload,o=i.dialog&&i.dialog.templateUrl?i.dialog:void 0,c=function(e){return n.loadingTable=!0,t.when().then(function(){return s(e)}).then(function(){return d?n.tableParams.reload():void 0})["finally"](function(){return delete n.loadingTable})},o?(r=function(t){var l,r,s;return s=e.actions.dialog.params(o.params)(t),r=_.merge(n.$new(!0),s),l=a.open({templateUrl:i.dialog.templateUrl,scope:r}),l.result.then(function(){return c(t)})["catch"](function(){return i.dialog&&i.dialog.onCancel?i.dialog.onCancel(t,s):void 0})},[l,r]):[l,c]}),n.actions=_.object(n.actions),n.tableParams=new i({page:n.options.firstPage,count:n.options.pageSize},{$scope:n,getData:function(t,e){var a,i;return n.loadingTable=!0,i=(e.page()-1)*e.count(),a=e.count(),n.options.getPage(i,a).then(function(e){return n.tableParams.total(e[0]),t.resolve(e[1]),delete n.loadingTable})}})}}}),t.directive("ngTableAsyncButton",function(){return{restrict:"E",scope:{action:"&",label:"=",size:"@",style:"@",icon:"@"},templateUrl:function(t,e){return e.templateUrl&&"undefined"!==e.templateUrl?e.templateUrl:"partials/_ng_table_async_button.html"},link:function(t,e,n){var a;return n.size="xs"===(a=n.size)||"sm"===a||"lg"===a?"btn-"+n.size:"",n.style=n.style&&"undefined"!==n.style?"btn-"+n.style:"btn-default",n.icon=n.icon&&"undefined"!==n.icon?n.icon:void 0}}}),t.directive("ngTableAsyncNoDataAvailable",function(){return{restrict:"E",templateUrl:function(t,e){return e.templateUrl&&"undefined"!==e.templateUrl?e.templateUrl:"partials/_ng_table_async_no_data_available.html"},link:function(t,e,n){return n.text&&"undefined"!==n.text||(n.text=DEFAULT_NO_DATA_AVAILABLE_TEXT),t.text=n.text}}}),t.directive("ngTableAsyncPager",function(){return{restrict:"E",template:function(t,e){return e.templateUrl&&"undefined"!==e.templateUrl||(e.templateUrl="partials/_ng_table_async_pager.html"),'<div ng-table-pagination="tableParams" template-url="\''+e.templateUrl+"'\"></div>"}}})}).call(this);
//# sourceMappingURL=index.min.js.map